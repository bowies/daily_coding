package programmers;

import java.util.Arrays;
import java.util.PriorityQueue;

public class ë””ìŠ¤í¬_ì»¨íŠ¸ë¡¤ëŸ¬_230316 {


    /*
    í•˜ë“œë””ìŠ¤í¬ëŠ” í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    ë””ìŠ¤í¬ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.
    ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ ìš”ì²­ì´ ë“¤ì–´ì˜¨ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

    ì˜ˆë¥¼ë“¤ì–´

    - 0ms ì‹œì ì— 3msê°€ ì†Œìš”ë˜ëŠ” Aì‘ì—… ìš”ì²­
    - 1ms ì‹œì ì— 9msê°€ ì†Œìš”ë˜ëŠ” Bì‘ì—… ìš”ì²­
    - 2ms ì‹œì ì— 6msê°€ ì†Œìš”ë˜ëŠ” Cì‘ì—… ìš”ì²­
    ì™€ ê°™ì€ ìš”ì²­ì´ ë“¤ì–´ì™”ìŠµë‹ˆë‹¤. ì´ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
    Screen Shot 2018-09-13 at 6.34.58 PM.png

    í•œ ë²ˆì— í•˜ë‚˜ì˜ ìš”ì²­ë§Œì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê°ê°ì˜ ì‘ì—…ì„ ìš”ì²­ë°›ì€ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì²˜ë¦¬ ë©ë‹ˆë‹¤.
    Screen Shot 2018-09-13 at 6.38.52 PM.png

    - A: 3ms ì‹œì ì— ì‘ì—… ì™„ë£Œ (ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 3ms)
    - B: 1msë¶€í„° ëŒ€ê¸°í•˜ë‹¤ê°€, 3ms ì‹œì ì— ì‘ì—…ì„ ì‹œì‘í•´ì„œ 12ms ì‹œì ì— ì‘ì—… ì™„ë£Œ(ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 11ms)
    - C: 2msë¶€í„° ëŒ€ê¸°í•˜ë‹¤ê°€, 12ms ì‹œì ì— ì‘ì—…ì„ ì‹œì‘í•´ì„œ 18ms ì‹œì ì— ì‘ì—… ì™„ë£Œ(ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 16ms)
    ì´ ë•Œ ê° ì‘ì—…ì˜ ìš”ì²­ë¶€í„° ì¢…ë£Œê¹Œì§€ ê±¸ë¦° ì‹œê°„ì˜ í‰ê· ì€ 10ms(= (3 + 11 + 16) / 3)ê°€ ë©ë‹ˆë‹¤.

    í•˜ì§€ë§Œ A â†’ C â†’ B ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•˜ë©´
    Screen Shot 2018-09-13 at 6.41.42 PM.png

    - A: 3ms ì‹œì ì— ì‘ì—… ì™„ë£Œ(ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 3ms)
    - C: 2msë¶€í„° ëŒ€ê¸°í•˜ë‹¤ê°€, 3ms ì‹œì ì— ì‘ì—…ì„ ì‹œì‘í•´ì„œ 9ms ì‹œì ì— ì‘ì—… ì™„ë£Œ(ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 7ms)
    - B: 1msë¶€í„° ëŒ€ê¸°í•˜ë‹¤ê°€, 9ms ì‹œì ì— ì‘ì—…ì„ ì‹œì‘í•´ì„œ 18ms ì‹œì ì— ì‘ì—… ì™„ë£Œ(ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 17ms)
    ì´ë ‡ê²Œ A â†’ C â†’ Bì˜ ìˆœì„œë¡œ ì²˜ë¦¬í•˜ë©´ ê° ì‘ì—…ì˜ ìš”ì²­ë¶€í„° ì¢…ë£Œê¹Œì§€ ê±¸ë¦° ì‹œê°„ì˜ í‰ê· ì€ 9ms(= (3 + 7 + 17) / 3)ê°€ ë©ë‹ˆë‹¤.

    ê° ì‘ì—…ì— ëŒ€í•´ [ì‘ì—…ì´ ìš”ì²­ë˜ëŠ” ì‹œì , ì‘ì—…ì˜ ì†Œìš”ì‹œê°„]ì„ ë‹´ì€ 2ì°¨ì› ë°°ì—´ jobsê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, ì‘ì—…ì˜ ìš”ì²­ë¶€í„° ì¢…ë£Œê¹Œì§€ ê±¸ë¦° ì‹œê°„ì˜ í‰ê· ì„ ê°€ì¥ ì¤„ì´ëŠ” ë°©ë²•ìœ¼ë¡œ ì²˜ë¦¬í•˜ë©´ í‰ê· ì´ ì–¼ë§ˆê°€ ë˜ëŠ”ì§€ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. (ë‹¨, ì†Œìˆ˜ì  ì´í•˜ì˜ ìˆ˜ëŠ” ë²„ë¦½ë‹ˆë‹¤)

    ì œí•œ ì‚¬í•­
    jobsì˜ ê¸¸ì´ëŠ” 1 ì´ìƒ 500 ì´í•˜ì…ë‹ˆë‹¤.
    jobsì˜ ê° í–‰ì€ í•˜ë‚˜ì˜ ì‘ì—…ì— ëŒ€í•œ [ì‘ì—…ì´ ìš”ì²­ë˜ëŠ” ì‹œì , ì‘ì—…ì˜ ì†Œìš”ì‹œê°„] ì…ë‹ˆë‹¤.
    ê° ì‘ì—…ì— ëŒ€í•´ ì‘ì—…ì´ ìš”ì²­ë˜ëŠ” ì‹œê°„ì€ 0 ì´ìƒ 1,000 ì´í•˜ì…ë‹ˆë‹¤.
    ê° ì‘ì—…ì— ëŒ€í•´ ì‘ì—…ì˜ ì†Œìš”ì‹œê°„ì€ 1 ì´ìƒ 1,000 ì´í•˜ì…ë‹ˆë‹¤.
    í•˜ë“œë””ìŠ¤í¬ê°€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ìˆì§€ ì•Šì„ ë•Œì—ëŠ” ë¨¼ì € ìš”ì²­ì´ ë“¤ì–´ì˜¨ ì‘ì—…ë¶€í„° ì²˜ë¦¬í•©ë‹ˆë‹¤.
    ì…ì¶œë ¥ ì˜ˆ
    jobs	return
    [[0, 3], [1, 9], [2, 6]]	9
    ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…
    ë¬¸ì œì— ì£¼ì–´ì§„ ì˜ˆì™€ ê°™ìŠµë‹ˆë‹¤.

    0ms ì‹œì ì— 3ms ê±¸ë¦¬ëŠ” ì‘ì—… ìš”ì²­ì´ ë“¤ì–´ì˜µë‹ˆë‹¤.
    1ms ì‹œì ì— 9ms ê±¸ë¦¬ëŠ” ì‘ì—… ìš”ì²­ì´ ë“¤ì–´ì˜µë‹ˆë‹¤.
    2ms ì‹œì ì— 6ms ê±¸ë¦¬ëŠ” ì‘ì—… ìš”ì²­ì´ ë“¤ì–´ì˜µë‹ˆë‹¤.
    ë¬¸ì œê°€ ì˜ ì•ˆí’€ë¦°ë‹¤ë©´ğŸ˜¢
     */






    public int solution(int[][] jobs) {

        //ìš”ì²­ì‹œê°„ ë³„ë¡œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
        Arrays.sort(jobs, (o1, o2) -> o1[0] - o2[0]);
        
        int answer = 0;
        int ìˆ˜í–‰ì™„ë£Œì‹œê°„ = 0;
        int ë°°ì—´Index = 0;
        int counter = 0;


        PriorityQueue<int[]> ìš°ì„ ìˆœìœ„í = new PriorityQueue<>((o1, o2) -> o1[1] - o2[1]);

        while (counter < jobs.length) {
            //ì „ì²´ ìˆ˜í–‰ í•„ìš”

            while (ë°°ì—´Index < jobs.length && jobs[ë°°ì—´Index][0] <= ìˆ˜í–‰ì™„ë£Œì‹œê°„) {
                //ìˆ˜í–‰ì™„ë£Œì‹œê°„ <- ì— í•´ë‹¹ë˜ëŠ” ì• ë“¤ì„ ë‹¤ ìš°ì„ ìˆœìœ„íì—ë‹¤ê°€ ë„£ìŒ
                ìš°ì„ ìˆœìœ„í.add(jobs[ë°°ì—´Index++]);
            }

            if (ìš°ì„ ìˆœìœ„í.isEmpty()) {
                //ë¹„ì–´ìˆìŒ => ìš°ì„ ìˆœìœ„íì— ìˆ˜í–‰ì™„ë£Œì‹œê°„ì— í•´ë‹¹ë˜ëŠ” ì• ê°€ ì—†ìŒ
                //ê·¸ëŸ¬ë©´ ìˆ˜í–‰ì™„ë£Œì‹œê°„ì„ ë§¨ ì²˜ìŒìœ¼ë¡œ ì´ë™ì‹œí‚´ -> ì •ë ¬í–ˆìœ¼ë‹ˆê¹Œ ê·¸ ë‹¤ìŒ ì§§ì€ ì• ë¶€í„° ì‹œì‘
                ìˆ˜í–‰ì™„ë£Œì‹œê°„ = jobs[ë°°ì—´Index][0];
            } else {
                //ìˆìŒ -> ì •ìƒ ìˆ˜í–‰
                int [] arr = ìš°ì„ ìˆœìœ„í.poll();
                answer += arr[1] + ìˆ˜í–‰ì™„ë£Œì‹œê°„ - arr[0];
                ìˆ˜í–‰ì™„ë£Œì‹œê°„ += arr[1];
                counter++;
            }
        }

        return (int) Math.floor(answer / jobs.length);
    }






    public int solution_ORIGINAL(int[][] jobs) {
        int answer = 0;

        // ì‘ì—…ì´ ìš”ì²­ë˜ëŠ” ì‹œì  ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
        Arrays.sort(jobs, (o1, o2) -> o1[0] - o2[0]);

        // ì‘ì—…ì˜ ì†Œìš”ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
        PriorityQueue<int[]> pq = new PriorityQueue<>((o1, o2) -> o1[1] - o2[1]);

        int jobs_index = 0; // ì‘ì—… ë°°ì—´ ì¸ë±ìŠ¤
        int finish_job = 0; // ì²˜ë¦¬ ì™„ë£Œëœ ì‘ì—… ê°œìˆ˜
        int end_time = 0; // ì‘ì—… ì²˜ë¦¬ ì™„ë£Œ ì‹œê°„

        while(true) {
            if(finish_job == jobs.length) break; // ëª¨ë“  ì‘ì—…ì„ ì²˜ë¦¬í–ˆë‹¤ë©´ ì¢…ë£Œ

            // ì´ì „ ì‘ì—… ì²˜ë¦¬ ì¤‘ ìš”ì²­ëœ ì‘ì—… add
            while(jobs_index < jobs.length && jobs[jobs_index][0] <= end_time) {
                pq.add(jobs[jobs_index++]);
            }

            if(!pq.isEmpty()) { // ì´ì „ ì‘ì—… ì²˜ë¦¬ ì¤‘ ìš”ì²­ëœ ì‘ì—…ì´ ìˆëŠ” ê²½ìš°
                int[] job = pq.poll();
                answer += end_time - job[0] + job[1]; // ì‘ì—… ìš”ì²­ë¶€í„° ì¢…ë£Œê¹Œì§€ ê±¸ë¦° ì‹œê°„ ì¶”ê°€
                end_time += job[1]; // ì‘ì—… ì²˜ë¦¬ ì™„ë£Œ ì‹œê°„ ê°±ì‹ 
                finish_job++; // ì²˜ë¦¬ ì™„ë£Œëœ ì‘ì—… ê°œìˆ˜ 1 ì¦ê°€
            } else { // ì´ì „ ì‘ì—… ì²˜ë¦¬ ì¤‘ ìš”ì²­ëœ ì‘ì—…ì´ ì—†ëŠ” ê²½ìš°
                end_time = jobs[jobs_index][0]; // ë‹¤ìŒ ì‘ì—… ìš”ì²­ ì‹œì ìœ¼ë¡œ ê°±ì‹ 
            }
        }

        return answer / jobs.length;
    }





}
